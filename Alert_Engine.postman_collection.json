{
  "info": {
    "name": "Alert Engine API",
    "description": "Complete API collection for Alert Engine endpoints and alert types",
    "version": "1.1.0",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Alert Rules",
      "item": [
        {
          "name": "Create Alert - PRICE_THRESHOLD",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"symbol\": \"AAPL\",\n  \"title\": \"Alerta de precio\",\n  \"note\": \"Avisame cuando rompa resistencia\",\n  \"singleTrigger\": false,\n  \"kind\": \"PRICE_THRESHOLD\",\n  \"timeframe\": \"H1\",\n  \"status\": \"ACTIVE\",\n  \"severity\": \"CRITICAL\",\n  \"debounceSeconds\": 300,\n  \"params\": {\n    \"operator\": \"GTE\",\n    \"value\": 150.00\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/alerts",
              "host": ["{{base_url}}"],
              "path": ["alerts"]
            }
          }
        },
        {
          "name": "Create Alert - PCT_CHANGE",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"symbol\": \"AAPL\",\n  \"title\": \"Cambio porcentual\",\n  \"note\": \"Seguimiento semanal\",\n  \"singleTrigger\": false,\n  \"kind\": \"PCT_CHANGE\",\n  \"timeframe\": \"D1\",\n  \"status\": \"ACTIVE\",\n  \"severity\": \"WARNING\",\n  \"debounceSeconds\": 600,\n  \"params\": {\n    \"operator\": \"GTE\",\n    \"pct\": 3.5,\n    \"lookbackBars\": 12,\n    \"basis\": \"CLOSE\"\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/alerts",
              "host": ["{{base_url}}"],
              "path": ["alerts"]
            }
          }
        },
        {
          "name": "Create Alert - MA_CROSS",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"symbol\": \"AAPL\",\n  \"title\": \"Cruce de medias\",\n  \"note\": \"Uso intradia\",\n  \"singleTrigger\": false,\n  \"kind\": \"MA_CROSS\",\n  \"timeframe\": \"H1\",\n  \"status\": \"ACTIVE\",\n  \"severity\": \"INFO\",\n  \"debounceSeconds\": 0,\n  \"params\": {\n    \"fast\": 9,\n    \"slow\": 21,\n    \"direction\": \"UP\"\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/alerts",
              "host": ["{{base_url}}"],
              "path": ["alerts"]
            }
          }
        },
        {
          "name": "Create Alert - RSI",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"symbol\": \"AAPL\",\n  \"title\": \"RSI sobrecomprado\",\n  \"note\": \"Control de riesgo\",\n  \"singleTrigger\": false,\n  \"kind\": \"RSI\",\n  \"timeframe\": \"H4\",\n  \"status\": \"ACTIVE\",\n  \"severity\": \"WARNING\",\n  \"debounceSeconds\": 300,\n  \"params\": {\n    \"period\": 14,\n    \"threshold\": 70,\n    \"operator\": \"ABOVE\"\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/alerts",
              "host": ["{{base_url}}"],
              "path": ["alerts"]
            }
          }
        },
        {
          "name": "Create Alert - VOLUME_SPIKE",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"symbol\": \"AAPL\",\n  \"title\": \"Pico de volumen\",\n  \"note\": \"Senal rapida\",\n  \"singleTrigger\": false,\n  \"kind\": \"VOLUME_SPIKE\",\n  \"timeframe\": \"M15\",\n  \"status\": \"ACTIVE\",\n  \"severity\": \"CRITICAL\",\n  \"debounceSeconds\": 120,\n  \"params\": {\n    \"operator\": \"ABOVE_MA\",\n    \"lookback\": 20,\n    \"multiplier\": 2.5\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/alerts",
              "host": ["{{base_url}}"],
              "path": ["alerts"]
            }
          }
        },
        {
          "name": "List Alerts",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/alerts?page=0&size=10&symbol=AAPL&status=ACTIVE&kind=PRICE_THRESHOLD&timeframe=D1&sort=createdAt,desc",
              "host": ["{{base_url}}"],
              "path": ["alerts"],
              "query": [
                {
                  "key": "page",
                  "value": "0",
                  "disabled": false
                },
                {
                  "key": "size",
                  "value": "10",
                  "disabled": false
                },
                {
                  "key": "symbol",
                  "value": "AAPL",
                  "disabled": false
                },
                {
                  "key": "status",
                  "value": "ACTIVE",
                  "disabled": false
                },
                {
                  "key": "kind",
                  "value": "PRICE_THRESHOLD",
                  "disabled": false
                },
                {
                  "key": "timeframe",
                  "value": "D1",
                  "disabled": false
                },
                {
                  "key": "sort",
                  "value": "createdAt,desc",
                  "disabled": false
                }
              ]
            }
          }
        },
        {
          "name": "List Alerts (Internal)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/alerts/internal/list?userId={{user_id}}&page=0&size=10&status=ACTIVE&sort=createdAt,desc",
              "host": ["{{base_url}}"],
              "path": ["alerts", "internal", "list"],
              "query": [
                {
                  "key": "userId",
                  "value": "{{user_id}}",
                  "disabled": false
                },
                {
                  "key": "page",
                  "value": "0",
                  "disabled": false
                },
                {
                  "key": "size",
                  "value": "10",
                  "disabled": false
                },
                {
                  "key": "status",
                  "value": "ACTIVE",
                  "disabled": false
                },
                {
                  "key": "sort",
                  "value": "createdAt,desc",
                  "disabled": false
                }
              ]
            }
          }
        },
        {
          "name": "Update Alert",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"params\": {\n    \"operator\": \"GTE\",\n    \"value\": 160.00\n  },\n  \"title\": \"Alerta actualizada\",\n  \"note\": \"\",\n  \"singleTrigger\": true,\n  \"status\": \"ACTIVE\",\n  \"severity\": \"WARNING\",\n  \"debounceSeconds\": 600\n}"
            },
            "url": {
              "raw": "{{base_url}}/alerts/{{alert_id}}",
              "host": ["{{base_url}}"],
              "path": ["alerts", "{{alert_id}}"]
            }
          }
        },
        {
          "name": "Delete Alert",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/alerts/{{alert_id}}",
              "host": ["{{base_url}}"],
              "path": ["alerts", "{{alert_id}}"]
            }
          }
        }
      ]
    },
    {
      "name": "Alert Kinds",
      "item": [
        {
          "name": "List Alert Kinds",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/alert-kinds",
              "host": ["{{base_url}}"],
              "path": ["alert-kinds"]
            }
          }
        }
      ]
    },
    {
      "name": "Alert Events",
      "item": [
        {
          "name": "List Alert Events",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/alert-events?page=0&size=20&sort=triggeredAt,desc",
              "host": ["{{base_url}}"],
              "path": ["alert-events"],
              "query": [
                {
                  "key": "page",
                  "value": "0",
                  "disabled": false
                },
                {
                  "key": "size",
                  "value": "20",
                  "disabled": false
                },
                {
                  "key": "sort",
                  "value": "triggeredAt,desc",
                  "disabled": false
                }
              ]
            }
          }
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8080",
      "type": "string"
    },
    {
      "key": "jwt_token",
      "value": "your_jwt_token_here",
      "type": "string"
    },
    {
      "key": "user_id",
      "value": "7ab02c59-8f45-4ef9-9a5b-b1b0d19cb7d2",
      "type": "string"
    },
    {
      "key": "alert_id",
      "value": "550e8400-e29b-41d4-a716-446655440000",
      "type": "string"
    }
  ]
}
